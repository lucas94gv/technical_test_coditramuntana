<div class="container mt-5">
  <h1 class="text-center">Homepage</h1>

  <%= link_to 'Export CSV', export_data_path(format: :csv), class: "nav-link" %>

  <table class="table table-striped table-bordered mt-4">
    <thead class="thead-dark">
      <tr>
        <th scope="col">LP</th>
        <th scope="col">Artist</th>
        <th scope="col">Total Songs</th>
        <th scope="col">Authors</th>
      </tr>
    </thead>
    <tbody>
      <% @lps.each do |lp| %>
        <tr>
          <td><%= lp.name %></td>
          <td><%= lp.artist.name %></td>
          <td><%= lp.songs.count %></td>
          <td>
            <%= lp.songs.joins(:authors).distinct.pluck('authors.name').join(", ") %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>